"using strict";var APP_VERSION=5;var ITEM_STATUS_NEW=-1;var ITEM_STATUS_QUEUE=1;var ITEM_STATUS_DONE=2;var ITEM_STATUS_FAILED=3;var API_URL="../shared/screenshots-v5.php";var SCREENSHOT_SERVERS_API_URL="../cache/info.json";var DISABLE_EVERYTHING=false;var $skinContainerOriginal;var forcedInit=false;var screenshotNotes={};function loadScreenshotNotes(){var permanentStorage=window.localStorage;var screenshotNotesSave=permanentStorage.getItem("screenshotNotes");if(screenshotNotesSave){screenshotNotes=JSON.parse(screenshotNotesSave);}}
function saveScreenshotNote(inspectLink,note){screenshotNotes[inspectLink]=note;var permanentStorage=window.localStorage;permanentStorage.setItem("screenshotNotes",JSON.stringify(screenshotNotes));}
function getScreenshotNote(inspectLink){return screenshotNotes[inspectLink];}
Array.prototype.move=function(old_index,new_index){if(new_index>=this.length){var k=new_index-this.length;while((k--)+1){this.push(undefined);}}
this.splice(new_index,0,this.splice(old_index,1)[0]);return this;};function downloadPage(url,callback){var xhttp=new XMLHttpRequest();xhttp.onreadystatechange=function(){if(xhttp.readyState==4&&xhttp.status==200){callback(xhttp.responseText);}};xhttp.open("GET",url,true);xhttp.send();}
function getThumbnail(imageUrl){var parts=imageUrl.split(".");var output=parts[0]+"."+parts[1]+"."+parts[2]+"_t."+parts[3];return output;}
function setStatus(status){var statusText=""+(new Date())+" "+status;}
navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;function vibrate(){if(navigator.vibrate){navigator.vibrate(50);}}
var csgo={itemList:new Array(),userIdentifier:"",showAdCounter:0,waitingForItems:false,mainLoopStep:5000,saveChangedItem:function(item){try{var found=false;for(var i=0;i<csgo.itemList.length;i++){if(csgo.itemList[i].screen_id==item.screen_id){csgo.itemList[i]=item;found=true;}}
if(!found){csgo.itemList.push(item);}
csgo.saveStorage();csgo.reloadItemsGui();}catch(e){console.log(e);}},updateItem:function(item){try{var updateItemUrl=API_URL+"?cmd=request_screenshot_status&id="+item.screen_id;downloadPage(updateItemUrl,function(txt){try{var responseObject=JSON.parse(txt);if(responseObject&&responseObject.success==true){responseObject=responseObject.result;if(responseObject.status!=item.status||responseObject.place_in_queue!=item.place_in_queue){setStatus('saving changed item '+JSON.stringify(item));csgo.saveChangedItem(responseObject);}else{setStatus('not saving unchanged item');}}else{}}catch(e){setStatus("error in function: inside updateItem");alert(e);}});}catch(e){setStatus("error in function: updateItem");alert(e);}},settingsVisible:false,transitionAnimationTime:75,transitionDone:true,transitionView:function(){if(csgo.transitionDone){csgo.settingsVisible=!csgo.settingsVisible;csgo.transitionDone=false;if(csgo.settingsVisible){$(".left").animate({top:"0px"},csgo.transitionAnimationTime,function(){csgo.transitionDone=true;});}else{$(".left").animate({top:"105%"},csgo.transitionAnimationTime,function(){csgo.transitionDone=true;});}}},checkItems:function(){try{var unfinishedItem=false;for(var i=0;i<csgo.itemList.length;i++){var item=csgo.itemList[i];if(item.status==ITEM_STATUS_NEW||item.status==ITEM_STATUS_QUEUE){unfinishedItem=true;csgo.updateItem(item);}}
csgo.waitingForItems=unfinishedItem;}catch(e){alert("error in function: checkItems");}},itemsEqual:function(itemA,itemB){var output=(itemA.inspectLink==itemB.inspectLink&&itemA.custom_rotation_id==itemB.custom_rotation_id);return output;},addItem:function(inspectLink,custom_rotation_id){try{var found=false;if(!custom_rotation_id)
custom_rotation_id=csgo.getCustomRotationIndex();var resolutionIndex=csgo.getResolutionIndex();var newScreenshotUrl=API_URL+"?cmd=request_new_link&inspect_link="+encodeURIComponent(inspectLink);newScreenshotUrl+="&user_uuid="+encodeURIComponent(csgo.userIdentifier);newScreenshotUrl+="&user_client=1";newScreenshotUrl+="&custom_rotation_id="+encodeURIComponent(custom_rotation_id);newScreenshotUrl+="&use_logo="+encodeURIComponent(csgo.getCustomImageId());newScreenshotUrl+="&mode="+encodeURIComponent(csgo.getMode());newScreenshotUrl+="&resolution="+encodeURIComponent(resolutionIndex);newScreenshotUrl+="&forceOpskins="+encodeURIComponent(csgo.getPremiumForceOpskinsBackground());var $skin=$skinContainerOriginal.clone();$skin.$openImageButton=$skin.find(".openImageButton").first();$("#skinList").prepend($skin);$skin.setSkinStatus=function(newStatusText){$skin.find("#skinStatusSpan").first().text(newStatusText);};$skin.setSkinStatus("Loading float...");$skin.find(".skinProperty").first().css("left","50px");$skin.addClass("statusQueue");$skin.$openImageButton.remove();$.get(newScreenshotUrl,function(result){$skin.remove();if(result.success==true){csgo.mainLoopCount=0;var newItem=result.result;newItem.status=ITEM_STATUS_QUEUE;csgo.itemList.push(newItem);csgo.saveStorage();csgo.checkItems();csgo.updateStatusBar();csgo.reloadItemsGui();}else{alert(result.reason);}});}catch(e){alert("error in function: addItem"+e);}},deleteItem_:function(item){for(var i=0;i<csgo.itemList.length;i++){if(csgo.itemList[i].screen_id==item.screen_id){csgo.itemList.splice(i,1);csgo.saveStorage();csgo.reloadItemsGui();return;}}},deleteItem:function(item){if(confirm('Are you sure you want to delete this item?')){csgo.deleteItem_(item);}},redoItem:function(item){if(confirm('Are you sure you want to retake the screenshot?\nthis will delete the image from the server and put it in the queue again.\n')){csgo.deleteItem_(item);csgo.addItem(item.inspectLink,item.custom_rotation_id);}},addLongPressFunction:function(skin){skin.optionsVisible=false;var skinContainerInner=skin.find('.skinContainerInner').first();var skinContainerOptions=skin.find('.skinContainerOptions').first();var onLongPressToggle=function(){skin.longpress=true;setTimeout(function(){if(skin.longpress){skin.longpress=false;skinContainerInner.removeClass("hidden");skinContainerOptions.removeClass("hidden");if(!skin.optionsVisible){skinContainerInner.addClass("hidden");skin.optionsVisible=true;}else{skinContainerOptions.addClass("hidden");skin.optionsVisible=false;}
vibrate();}},300);};var longPressCancel=function(){skin.longpress=false;};skinContainerInner.on('mousedown',onLongPressToggle);skinContainerInner.on('mouseup',longPressCancel);skinContainerOptions.on('touchstart',onLongPressToggle);skinContainerOptions.on('touchend',longPressCancel);},shareLink:function(link){window.plugins.socialsharing.share(null,null,null,link);},getWearValueText:function(floatValue){floatValue=parseFloat(floatValue);if(floatValue>=0.45)
return "BS";else if(floatValue>=0.38)
return "WW";else if(floatValue>=0.15)
return "FT";else if(floatValue>=0.07)
return "MW";else
return "FN";},reloadItemsGui:function(){try{$("#skinList").empty();for(var i=0;i<csgo.itemList.length;i++){var currentItem=csgo.itemList[i];var $skin=$skinContainerOriginal.clone();$skin.find("#trashButton").first().click(function(){csgo.deleteItem(this);}.bind(currentItem));$skin.find("#retryButton").first().click(function(){csgo.redoItem(this);}.bind(currentItem));$skin.find("#shareButton").first().click(function(){csgo.shareLink(this);}.bind(currentItem.imgurLink));$skin.setSkinStatus=function(newStatusText){$skin.find("#skinStatusSpan").first().text(newStatusText);};$skin.$openImageButton=$skin.find(".openImageButton").first();$skin.find("#screenshotAttempts").text(currentItem.num_failed_tries);if(currentItem.num_failed_tries>2&&currentItem.status!=ITEM_STATUS_DONE)
$skin.find("#screenshotAttempts").css('color','#990000');if(!currentItem.num_failed_tries)
$skin.find("#attemptsSpan").remove();if(currentItem.status==ITEM_STATUS_DONE){$skin.find("#attemptsSpan").remove();$skin.setSkinStatus("Done");var imgurLink;var thumbnailUrl;if(currentItem.imgurLink){imgurLink=currentItem.imgurLink+" ";imgurLink=imgurLink.replace(" ","");thumbnailUrl=getThumbnail(imgurLink);}else{imgurLink=currentItem.image_url;thumbnailUrl=currentItem.thumbnail_url;}
$skin.find(".openImageButton").first().click(function(){var myLink=this;window.open(myLink,'_blank');}.bind(imgurLink));$skin.addClass("statusSuccess");$skin.$openImageButton.attr('data-img',thumbnailUrl);$skin.find("#floatValueS").text(currentItem.item_floatvalue+" ("+csgo.getWearValueText(currentItem.item_floatvalue)+")");$skin.find("#patternIndexS").text(currentItem.item_paintseed);}else if(currentItem.status==ITEM_STATUS_NEW){$skin.setSkinStatus("Waiting to enter Queue");$skin.find("#attemptsSpan").remove();$skin.addClass("statusQueue");$skin.$openImageButton.remove();}else if(currentItem.status==ITEM_STATUS_FAILED){$skin.setSkinStatus("FAILED");$otherInfo=$skin.find("#otherInfo");$otherInfo.wrap($("<a href='//metjm.net/help/#failed' target='_blank' style='color:black;'></a>"));$otherInfo.wrap($("<b></b>"));$otherInfo.text("HELP");$skin.addClass("statusFailed");$skin.$openImageButton.remove();}else if(currentItem.status==ITEM_STATUS_QUEUE){if(currentItem.hasOwnProperty("place_in_queue"))
$skin.setSkinStatus("Place in Queue: "+currentItem.place_in_queue);else
$skin.setSkinStatus("...");$skin.find(".skinProperty").first().css("left","50px");$skin.addClass("statusQueue");$skin.$openImageButton.remove();if(currentItem.info==1){$skin.find("#floatValueS").text(currentItem.item_floatvalue+" ("+csgo.getWearValueText(currentItem.item_floatvalue)+")");$skin.find("#patternIndexS").text(currentItem.item_paintseed);}}
$("#skinList").prepend($skin);}
csgo.checkImages();}catch(e){}},saveStorage:function(){try{var permanentStorage=window.localStorage;permanentStorage.setItem("itemList",JSON.stringify(JSON.stringify(csgo.itemList)));permanentStorage.setItem("version",APP_VERSION);permanentStorage.setItem("showAdCounter",csgo.showAdCounter);}catch(e){alert("error in function: saveStorage");}},resetStorage:function(){var permanentStorage=window.localStorage;permanentStorage.setItem("itemList",JSON.stringify(new Array()));permanentStorage.setItem("version",APP_VERSION);permanentStorage.setItem("showAdCounter",1);csgo.itemList=new Array();},loadStorage:function(){try{var permanentStorage=window.localStorage;if(permanentStorage.getItem("version")!=APP_VERSION){csgo.resetStorage();}
csgo.itemList=JSON.parse(permanentStorage.getItem("itemList"));csgo.itemList=JSON.parse(csgo.itemList);csgo.showAdCounter=parseInt(permanentStorage.getItem("showAdCounter"));}catch(e){setStatus("error in function: loadStorage: "+JSON.stringify(e));}},updateStatusBar:function(){downloadPage(SCREENSHOT_SERVERS_API_URL,function(result){var resultObj=JSON.parse(result);if(resultObj.success==true){var normalServersOnline=0;var hqServersOnline=0;for(var i=0;i<resultObj.servers.length;i++){if(resultObj.servers[i].server_identifier.indexOf('hq')>=0)
hqServersOnline++;else
normalServersOnline++;}
$("#serversOnlineSpan").text(normalServersOnline);$("#serversOnlineHQSpan").text(hqServersOnline);$("#queueLengthSpan").text(resultObj.lengthFree);$("#queueLengthSpanPremium").text(resultObj.lengthPremium);$("#queueLengthSpanHq").text(resultObj.lengthHighres);}else{$("#serversOnlineSpan").text("error");$("#queueLengthSpan").text("error");}});},mainLoopCount:-1,mainLoop:function(){try{if(!DISABLE_EVERYTHING){csgo.mainLoopCount++;if(csgo.waitingForItems){if(csgo.waitingForItems)
csgo.checkItems();if(csgo.mainLoopCount%3==0)
csgo.updateStatusBar();}else if(csgo.mainLoopCount<1500){if(csgo.mainLoopCount%30==0)
csgo.updateStatusBar();}}
setTimeout(function(){csgo.mainLoop();},csgo.mainLoopStep);}catch(e){setStatus("error in function: mainLoop");setTimeout(function(){csgo.mainLoop();},csgo.mainLoopStep);}},addItemManually:function(url){if(!url)
url=$(".inspectLinkInput").val();if(url&&url!=""&&url.indexOf("steam://rungame/730/")>=0){csgo.addItem(url);var url=$(".inspectLinkInput").val("");}else{alert("invalid inspect url: "+url);}},forceReload:function(){$("#skinList").empty();var $loadingIcon=$("<div class='loadingIcon'></div>");$("#skinList").append($loadingIcon);setTimeout(function(){csgo.checkItems();csgo.reloadItemsGui();csgo.updateStatusBar();},100);},customRotationHideAll:function(){$("#customTimesAdd").addClass("hideThisShit");$("#customTimesSelect").addClass("hideThisShit");},customRotationShowExisting:function(){csgo.customRotationHideAll();$("#customTimesSelect").removeClass("hideThisShit");},customRotationShowNew:function(){csgo.customRotationHideAll();$("#customTimesAdd").removeClass("hideThisShit");},customRotationAddNew:function(){var rotation1=parseFloat($("#newCustomRotationRotation1").val());var rotation2=parseFloat($("#newCustomRotationRotation2").val());var description=($("#customTimesAdd_desc").val());if(!rotation1||!rotation2){alert("please enter values for both timestamps");}else if(rotation1<0||rotation2<0){alert("timestamps have to be positive");}else if(rotation1>25||rotation2>25){alert("timestamps higher than 25 are useless (the inspect animation is shorter than that)");}else{var url="../../shared/screenshots_customfeatures.php?cmd=add_custom_rotation&rotation_1="+rotation1+"&rotation_2="+rotation2+"&description="+encodeURIComponent(description);$.get(url,function(data){csgo.initializeCustom();});}},getCustomRotationIndex:function(){if(csgo.customFeatures.success&&$("#customRotCheckbox").attr('checked')){return $("#resSelectionRotations").val();}else{return 0;}},getCustomImageId:function(){if($('#displayCustomLogoCheckbox').attr('checked')){return '1';}else{return '0';}},getPremiumForceOpskinsBackground:function(){if($('#useOpskinBackground').attr('checked')){return '1';}else{return '0';}},getResolutionIndex:function(){if(!csgo.customFeatures.success)
return 0;if($("#customRotCheckbox").attr('checked')||$('#requestHqCheckbox').attr('checked')){return $("#resSelection").val();}else{return 0;}},getMode:function(){if($("#customRotCheckbox").attr('checked')){return 4;}else if($('#requestHqCheckbox').attr('checked')){if(csgo.customFeatures.premium)
return 3;else
return 7;}else{return 2;}},initializeCustom:function(callback){$.get("../shared/screenshots_customfeatures.php?cmd=get_premium_features",function(data){csgo.customFeatures=data;if(data.success){csgo.mainLoopStep=1000;$("#customRotationAddButton").off();$("#customRotationAddButton").click(csgo.customRotationShowNew);$("#cancelNewRotation").off();$("#cancelNewRotation").click(csgo.customRotationShowExisting);$("#acceptNewRotation").off();$("#acceptNewRotation").click(csgo.customRotationAddNew);$("#resSelectionRotations").empty();$("#resSelectionRotations").append($("<option value='0'>Default Rotations</option>"));$("#resSelectionRotations").append($("<option value='1'>Default Backside</option>"));$("#resSelectionRotations").append($("<option value='427'>Kara Corner</option>"));$("#resSelectionRotations").append($("<option value='846'>Bayo Spine</option>"));$("#resSelectionRotations").attr('disabled','disabled');if(data.rotations&&data.rotations.length){for(var i=0;i<data.rotations.length;i++){var rot=data.rotations[i];var $newChoice=$("<option value='"+rot.rotation_id+"'></option>");$newChoice.text(rot.description);$("#resSelectionRotations").append($newChoice);}}
if(data.customImage&&data.customImage!=0&&data.customImage!="0"){$("#customImagePremium").css('visibility','visible');}else{$("#customImageNoImage").css('visibility','visible');}
$("#customHqPremium").css('visibility','visible');$("#customOptionsNoPremium").addClass("hideThisShit");$("#customOptionsInner").removeClass("hideThisShit");$resSelection=$("#resSelection");$rotSelection=$("#resSelectionRotations");$addRotButton=$("#addCustomRotationbutton");$resSelection.empty();$("#requestHqCheckbox")[0].onAfterToggle=function(value){if(value){$resSelection.css('background-color','rgb(71, 180, 220)');if($("#customRotCheckbox")[0].setChecked)
$("#customRotCheckbox")[0].setChecked(false);$resSelection.empty();$rotSelection.attr('disabled','disabled');$rotSelection.css('background-color','white');if(!data.premium)
$resSelection.append($("<option value='4'>1600x900</option>"));$resSelection.append($("<option value='1'>1920x1080</option>"));$resSelection.append($("<option value='2'>2560x1440</option>"));if(data.premium)
$resSelection.append($("<option value='3'>3840x2160</option>"));$addRotButton.css('background-color','rgb(233, 233, 233)');}else{$resSelection.css('background-color','white');$resSelection.empty();}};$("#customRotCheckbox")[0].onAfterToggle=function(value){if(value){$resSelection.css('background-color','rgb(71, 180, 220)');$("#requestHqCheckbox")[0].setChecked(false);$resSelection.empty();$resSelection.append($("<option value='1'>1920x1080</option>"));$resSelection.append($("<option value='2'>2560x1440</option>"));$resSelection.append($("<option value='3'>3840x2160</option>"));$rotSelection.removeAttr('disabled');$rotSelection.css('background-color','rgb(71, 180, 220)');$addRotButton.css('background-color','rgb(71, 180, 220)');$("#addCustomRotationbutton").off();$("#addCustomRotationbutton").click(function(){window.open("../settings/addrotation.php");});}else{$resSelection.css('background-color','white');$resSelection.empty();$rotSelection.attr('disabled','disabled');$rotSelection.css('background-color','white');$addRotButton.css('background-color','rgb(233, 233, 233)');$("#addCustomRotationbutton").off();}};if(!data.premium){$("#useOpskinBackground").css('visibility','hidden');$("#displayCustomLogoCheckbox").css('visibility','hidden');$("#customRotCheckbox").css('visibility','hidden');$("#addCustomRotationbutton").css('visibility','hidden');$("#resSelectionRotations").css('visibility','hidden');$("#requestHqCheckbox").css('left','260px');$("#resSelection").css('left','525px');$("#requestHqCheckbox").text("Instant Field Inspection™");$("#requestHqCheckbox").css('width','220px');$("#requestHqCheckbox").attr('data-bic','url(/csgo/img/opskins.png)');$("#requestHqCheckbox").attr('data-bi','url(/csgo/img/opskins_inv.png)');}}else{$("#customOptionsInner").addClass("hideThisShit");}
$("#customOptionsInner").click(function(e){e.stopPropagation();});initializeCheckboxes();if(callback)
callback();});},checkImages:function(){var scrollPercentage=100*this.scrollTop/(this.scrollHeight-this.clientHeight);$("#skinList").find(".openImageButton").each(function(index,value){var distance=value.getBoundingClientRect().top;if(distance<1000){var $value=$(value);$value.css("background-image","url("+$value.attr('data-img')+")");}});},initialize:function(){var cookie=$.cookie("cookiesDirective");if(!cookie){window.localStorage.setItem("customchckbxrequestHqCheckbox",true);}
try{$(".requestInspectLinkButton").click(function(){csgo.addItemManually();});$skinContainerOriginal=$("#hiddenshit").find(".skinContainer").first().clone();$("#transitionButton").first().on('mouseup',csgo.transitionView);$("#transitionButton").first().on('touchend',csgo.transitionView);$("#forceReloadButton").first().on('mouseup',csgo.forceReload);$("#forceReloadButton").first().on('touchend',csgo.forceReload);$("#trashAllButton").first().click(function(){if(confirm("Are you sure you want to delete everything?")){csgo.resetStorage();csgo.saveStorage();csgo.reloadItemsGui();}else{}});csgo.initializeCustom(function(){var h=window.location.hash;if(h&&h.length>1){var regexp=/.*(S|M)(\d*)A(\d*)D(\d*)/g;var match=regexp.exec(h);if(match){var givenInspLink="steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20"+match[1]+match[2]+"A"+match[3]+"D"+match[4];csgo.addItemManually(givenInspLink);window.location.hash="";}}});csgo.loadStorage();csgo.checkItems();csgo.reloadItemsGui();csgo.mainLoop();$(window).bind('storage',function(e){});$("#skinList").scroll(function(){csgo.checkImages();});}catch(e){console.log(e);}}};function handleOpenURL(url){setTimeout(function(){csgo.addItem(url);},0);}
function getUUID(){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}
function saveCheckbox(checkboxId){var value=false;if($(checkboxId).is(":checked"))
value=true;var permanentStorage=window.localStorage;permanentStorage.setItem('checkbox_'+checkboxId,value);}
function loadCheckbox(checkboxId){var permanentStorage=window.localStorage;var v=permanentStorage.getItem('checkbox_'+checkboxId);if(v&&v!=false&&v!='false'){$(checkboxId).prop('checked',true);}}
function initBackgroundDisable(){$(window).on("blur focus",function(e){var prevType=$(this).data("prevType");if(prevType!=e.type){switch(e.type){case "blur":DISABLE_EVERYTHING=true;break;case "focus":DISABLE_EVERYTHING=false;csgo.checkItems();csgo.updateStatusBar();break;}}
$(this).data("prevType",e.type);});}
initBackgroundDisable();loadCheckbox("#requestHq");$("#requestHq").change(function(){saveCheckbox("#requestHq");});loadScreenshotNotes();var permanentStorage=window.localStorage;if(permanentStorage.getItem("loaded")!="DONE!"){permanentStorage.setItem("loaded","DONE!");permanentStorage.setItem("uuid",getUUID());}
csgo.userIdentifier=permanentStorage.getItem("uuid");forcedInit=true;csgo.initialize();function initializeCheckboxes(){$(".customcheckbox").each(function(index,value){var $val=$(value);var updateLooks=function($val){var currentChecked=$val.attr('checked');if(currentChecked){$val.css('background-color',$val.attr('data-bgc'));$val.css('border',"8px solid "+$val.attr('data-bgc'));$val.css('background-image',$val.attr('data-bic'));}else{$val.css('background-color',$val.attr('data-bg'));$val.css('border',"8px solid "+$val.attr('data-bg'));$val.css('background-image',$val.attr('data-bi'));}};var getLocalStorageName=function($val){var output="customchckbx"+$val.attr('id');return output;}
function saveValue($val,newValue){var localStorageName=getLocalStorageName($val);window.localStorage.setItem(localStorageName,newValue);};value.setChecked=function(value2){var $val=this;$val.attr('checked',value2);updateLooks($val);saveValue($val,value2);}.bind($val);$val.click(function(){var currentChecked=$val.attr('checked');var newChecked=!currentChecked;$val.attr('checked',newChecked);updateLooks($val);if($val[0].onAfterToggle)
$val[0].onAfterToggle(newChecked);saveValue($val,newChecked);});$val.addClass("noselect");var localStorageName=getLocalStorageName($(value));var loadedValue=window.localStorage.getItem(localStorageName);if(loadedValue==true||loadedValue=="true"){value.setChecked(true);if($val[0].onAfterToggle){$val[0].onAfterToggle(true);}else{}}else{}
updateLooks($val);});}
function addScreenshotCallback(returnObj){$.post("../settings/index.php",returnObj,function(data){location.reload();});}